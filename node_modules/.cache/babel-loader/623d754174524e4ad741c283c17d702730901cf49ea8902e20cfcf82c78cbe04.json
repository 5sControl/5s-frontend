{"ast":null,"code":"import _slicedToArray from\"/Users/user/Desktop/git/reactapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./Dashboard.scss';import{useEffect,useState}from'react';import{useCookies}from'react-cookie';import{API_URL,API_IMAGES,API_DASHBOARD_PAGE}from'../../api/api.js';import{Algorithm,Camera}from'../../assets/svg/SVGcomponent';import{proxy}from'../../api/proxy';import axios from'axios';import{AiOutlineLeft,AiOutlineRight}from\"react-icons/ai\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Dashboard(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),currentReport=_useState4[0],setCurrentReport=_useState4[1];var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var paginator=function paginator(page){proxy(API_DASHBOARD_PAGE(page),\"GET\",{'Authorization':cookies.token})// axios.get(API_DASHBOARD_PAGE(page),{\n//   headers: {\n//     'Authorization': cookies.token\n//   },\n// })\n.then(function(el){console.log(el);el.data.detail==='Authentication credentials were not provided.'||el.data.detail===\"Given token not valid for any token type\"?setData(false):setData(el.data);});};useEffect(function(){paginator(currentPage);},[currentPage]);return/*#__PURE__*/_jsx(_Fragment,{children:data&&/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"dashboard__count\",children:[data.count,\"\\xA0\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"dashboard__span\",children:\" reports generated today\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Reports\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__choose\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__tabs\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Camera\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Algorithm\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Sort: Newest\"})]}),data&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__paginator\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Reports per page: \".concat(currentPage===Math.ceil(data.count/20)?data.count%20:20)}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__paginator_container\",children:[/*#__PURE__*/_jsx(\"button\",{className:currentPage===1?'dashboard__paginator_button_noactive':'dashboard__paginator_button',onClick:function onClick(){return setCurrentPage(currentPage-1);},children:/*#__PURE__*/_jsx(AiOutlineLeft,{})}),/*#__PURE__*/_jsxs(\"span\",{className:\"dashboard__paginator_text\",children:[\" \",\"\".concat(currentPage,\" of \").concat(Math.ceil(data.count/20))]}),/*#__PURE__*/_jsx(\"button\",{className:currentPage===Math.ceil(data.count/20)?'dashboard__paginator_button_noactive':'dashboard__paginator_button',onClick:function onClick(){return setCurrentPage(currentPage+1);},children:/*#__PURE__*/_jsx(AiOutlineRight,{})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard__reports\",children:data&&data.results.map(function(el){return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__reports_item\",onClick:function onClick(){return setCurrentReport(el);},children:[/*#__PURE__*/_jsx(\"div\",{className:currentReport.id===el.id?'dashboard__reports_item_title active':'dashboard__reports_item_title',children:el.date_created}),/*#__PURE__*/_jsx(\"div\",{children:\"# \".concat(el.id)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Camera,{}),\" \",el.camera]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Algorithm,{}),\" Safety control:\",el.action]})]},el.id);})})]}),currentReport&&/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__report\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API_IMAGES+currentReport.image),alt:\"report img\",className:\"dashboard__report_image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__report_item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date & Time\"}),/*#__PURE__*/_jsx(\"span\",{children:currentReport.date_created})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__report_item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Camera\"}),/*#__PURE__*/_jsx(\"span\",{children:currentReport.camera})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__report_item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Algorithm\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Safety control:\",currentReport.action]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__report_item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Not Checked\"})]})]})]})]})});}export default Dashboard;","map":{"version":3,"names":["useEffect","useState","useCookies","API_URL","API_IMAGES","API_DASHBOARD_PAGE","Algorithm","Camera","proxy","axios","AiOutlineLeft","AiOutlineRight","Dashboard","data","setData","currentReport","setCurrentReport","cookies","setCookie","currentPage","setCurrentPage","paginator","page","token","then","el","console","log","detail","count","Math","ceil","results","map","id","date_created","camera","action","image"],"sources":["/Users/user/Desktop/git/reactapp/src/pages/dashboard/Dashboard.jsx"],"sourcesContent":["import './Dashboard.scss';\nimport { useEffect, useState } from 'react';\n\nimport { useCookies } from 'react-cookie';\n\nimport { API_URL, API_IMAGES, API_DASHBOARD_PAGE} from '../../api/api.js';\nimport { Algorithm, Camera } from '../../assets/svg/SVGcomponent';\nimport { proxy } from '../../api/proxy';\nimport axios from 'axios';\n\nimport { AiOutlineLeft, AiOutlineRight } from \"react-icons/ai\";\n\nfunction Dashboard() {\n\n  const [data, setData] = useState(false)\n  const [currentReport, setCurrentReport] = useState(false)\n  const [cookies, setCookie] = useCookies(['token']);\n  const [currentPage, setCurrentPage] = useState(1)\n\n  const paginator = (page) =>{\n    proxy(API_DASHBOARD_PAGE(page), \"GET\", {\n      'Authorization': cookies.token\n    })\n    // axios.get(API_DASHBOARD_PAGE(page),{\n    //   headers: {\n    //     'Authorization': cookies.token\n    //   },\n    // })\n      .then(el => {\n        console.log(el)\n          el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(false) : setData(el.data)\n        })\n  }\n  \n  useEffect(()=>{\n    paginator(currentPage)\n  },[currentPage])\n  \n  return (\n    <>\n        {\n        data  &&  \n          <div className='dashboard'>\n            <h1>Dashboard</h1>\n            <h2>\n              <span className='dashboard__count'>{data.count}&nbsp;</span>\n              <span className='dashboard__span'> reports generated today</span>\n            </h2>\n            <h3>Reports</h3>\n            <div className='dashboard__container'>\n              <div className='dashboard__choose'>\n                <div className='dashboard__tabs'>\n                  <span>Date</span>\n                  <span>Status</span>\n                  <span>Camera</span>\n                  <span>Algorithm</span>\n                  <span>Sort: Newest</span>\n                </div>\n               {data && <>\n                <div className='dashboard__paginator'>\n                  <span>{`Reports per page: ${currentPage === Math.ceil(data.count / 20) ? data.count % 20 : 20}`}</span>\n                    <div className='dashboard__paginator_container'>\n                      <button \n                          className={currentPage === 1? 'dashboard__paginator_button_noactive': 'dashboard__paginator_button'} \n                          onClick={()=>setCurrentPage(currentPage - 1)}>\n                        <AiOutlineLeft/>\n                      </button>\n                      <span className='dashboard__paginator_text'> {`${currentPage} of ${Math.ceil(data.count / 20)}`}</span>\n                      <button \n                          className={currentPage === Math.ceil(data.count / 20)? 'dashboard__paginator_button_noactive': 'dashboard__paginator_button'}  \n                          onClick={()=>setCurrentPage(currentPage + 1)}>\n                        <AiOutlineRight/>\n                      </button>\n                    </div>\n                  </div>\n               </>}\n               \n                <div className='dashboard__reports'>\n                  {data && data.results.map((el)=>{\n                    return (\n                      <div className='dashboard__reports_item' key={el.id} onClick={()=>setCurrentReport(el)}>\n                        <div className={currentReport.id === el.id ? 'dashboard__reports_item_title active': 'dashboard__reports_item_title'}>{el.date_created}</div>\n                        <div>{`# ${el.id}`}</div>\n                        <div><Camera/> {el.camera}</div>\n                        <div><Algorithm/> Safety control:{el.action}</div>\n                      </div>\n                    )\n                  })}\n                </div>\n              </div>\n              {currentReport &&\n                <div className='dashboard__report'>\n                   <img src={`${API_IMAGES + currentReport.image}`} alt='report img' className='dashboard__report_image'/>\n                   <div className='dashboard__report_item'>\n                    <span>Date & Time</span>\n                    <span>{currentReport.date_created}</span>\n                   </div>\n                   <div className='dashboard__report_item'>\n                    <span>Camera</span>\n                    <span>{currentReport.camera}</span>\n                   </div>\n                   <div className='dashboard__report_item'>\n                    <span>Algorithm</span>\n                    <span>Safety control:{currentReport.action}</span>\n                   </div>\n                   <div className='dashboard__report_item'>\n                    <span>Status</span>\n                    <span>Not Checked</span>\n                   </div>\n                </div>\n              }\n             \n            </div>\n          </div>\n     }\n    </>\n   \n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}