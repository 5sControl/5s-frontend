{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/git/reactapp/src/pages/company/authorization/Authorization.jsx\",\n  _s = $RefreshSig$();\nimport './Authorization.scss';\nimport logo from '../../../assets/svg/icon.svg';\nimport { useEffect, useState } from 'react';\nimport { proxyPOST } from '../../../api/proxy';\nimport { API_AUTH, API_AUTH_I } from '../../../api/api';\nimport { useCookies } from 'react-cookie';\nimport axios from 'axios';\nimport { getIsInternet } from '../../../functions/getURL';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Authorization = () => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [correctEmail, setCorrectEmail] = useState(false);\n  const [correctPassword, setCorrectPassword] = useState(false);\n  const [errorResponse, setErrorResponse] = useState(false);\n  const [cookies, setCookie] = useCookies(['token']);\n\n  // const validate = (text) => {\n  //     let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w\\w+)+$/;\n  //     if (reg.test(text) === false) {\n  //       setCorrectEmail(false)\n  //       setEmail(text)\n  //       return false;\n  //     }\n  //     else {\n  //       setEmail(text)\n  //       setCorrectEmail(true)\n  //     }\n  //   }\n\n  useEffect(() => {\n    if (password.length > 4 && password.length < 20) {\n      setCorrectPassword(true);\n    } else {\n      setCorrectPassword(false);\n    }\n  }, [password]);\n  useEffect(() => {\n    if (email.length > 4 && email.length < 20) {\n      setCorrectEmail(true);\n    } else {\n      setCorrectEmail(false);\n    }\n  }, [email]);\n  const post = () => {\n    if (getIsInternet(window.location.host)) {\n      axios.post(\"https://5scontrol.pl/proxy_to_ngrok\", {\n        url: API_AUTH_I,\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username: email,\n          password: password\n        })\n      }).then(response => {\n        if (response.status === 200 && response.data.access) {\n          // console.log(response.data.access)\n          setCookie('token', `JWT ${response.data.access}`, {\n            path: '/'\n          });\n        }\n        if (!response.data.access) {\n          console.log(response);\n          setErrorResponse('Incorrect email or password. Please, try again.');\n        }\n      }).catch(error => {\n        console.log(error.message);\n        setErrorResponse(error.message);\n      });\n    } else {\n      proxyPOST(`http://${window.location.hostname}${API_AUTH}`, {\n        \"username\": email,\n        \"password\": password\n      }).then(response => {\n        if (response.status === 200 && response.data.access) {\n          // console.log(response.data.access)\n          setCookie('token', `JWT ${response.data.access}`, {\n            path: '/'\n          });\n        }\n        if (!response.data.access) {\n          setErrorResponse(true);\n        }\n      }).catch(() => {\n        setErrorResponse(true);\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"authorization\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: logo,\n      alt: \"logo\",\n      className: \"authorization__logo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"authorization__title\",\n      children: \"Sign in to 5S Control\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"authorization__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter Email\",\n        className: \"authorization__input\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this), !correctEmail && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"authorization__error\",\n        children: \"Email isn't correct!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        className: \"authorization__input\",\n        placeholder: \"Enter Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this), !correctPassword && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"authorization__error\",\n        children: \"This field is required\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 34\n      }, this), errorResponse && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"authorization__error_response\",\n        children: \"Incorrect email or password. Please, try again.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"authorization__button\",\n        onClick: post,\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n_s(Authorization, \"OV/lZq0iETN/3jaYwwgc/yh9uBo=\", false, function () {\n  return [useCookies];\n});\n_c = Authorization;\nvar _c;\n$RefreshReg$(_c, \"Authorization\");","map":{"version":3,"names":["logo","useEffect","useState","proxyPOST","API_AUTH","API_AUTH_I","useCookies","axios","getIsInternet","Authorization","email","setEmail","password","setPassword","correctEmail","setCorrectEmail","correctPassword","setCorrectPassword","errorResponse","setErrorResponse","cookies","setCookie","length","post","window","location","host","url","method","headers","body","JSON","stringify","username","then","response","status","data","access","path","console","log","catch","error","message","hostname","e","target","value"],"sources":["/Users/user/Desktop/git/reactapp/src/pages/company/authorization/Authorization.jsx"],"sourcesContent":["import './Authorization.scss'\n\nimport logo from '../../../assets/svg/icon.svg'\nimport { useEffect, useState } from 'react'\nimport { proxyPOST } from '../../../api/proxy';\nimport { API_AUTH, API_AUTH_I } from '../../../api/api';\nimport { useCookies } from 'react-cookie';\nimport axios from 'axios';\nimport { getIsInternet } from '../../../functions/getURL';\nexport const Authorization = () => {\n\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [correctEmail, setCorrectEmail] = useState(false)\n    const [correctPassword, setCorrectPassword] = useState(false)\n    const [errorResponse, setErrorResponse] = useState(false)\n    const [cookies, setCookie] = useCookies(['token']);\n\n    // const validate = (text) => {\n    //     let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w\\w+)+$/;\n    //     if (reg.test(text) === false) {\n    //       setCorrectEmail(false)\n    //       setEmail(text)\n    //       return false;\n    //     }\n    //     else {\n    //       setEmail(text)\n    //       setCorrectEmail(true)\n    //     }\n    //   }\n\n      useEffect(()=>{\n        if (password.length > 4 && password.length < 20){\n            setCorrectPassword(true)\n        }else{\n            setCorrectPassword(false)\n        }\n      },[password])\n\n      useEffect(()=>{\n        if (email.length > 4 && email.length < 20){\n            setCorrectEmail(true)\n        }\n        else{\n            setCorrectEmail(false)\n        }\n      },[email])\n     \nconst post = () =>{\n\n  if (getIsInternet(window.location.host)) {\n    axios.post(\"https://5scontrol.pl/proxy_to_ngrok\",{\n      url: API_AUTH_I,\n      method:\"POST\",\n      headers:{\n        \"Content-Type\": \"application/json\"\n      },\n      body:JSON.stringify({\n        username: email,\n        password: password,\n      })\n  })\n  \n  .then((response)=>{\n      if (response.status === 200 && response.data.access){\n        // console.log(response.data.access)\n          setCookie('token', `JWT ${response.data.access}`, { path: '/'})\n      }  \n      if(!response.data.access){\n        console.log(response)\n        setErrorResponse('Incorrect email or password. Please, try again.')\n      }\n    })\n    .catch((error) =>{\n      console.log(error.message)\n      setErrorResponse(error.message)\n    })\n  }\n  else{\n    proxyPOST(`http://${window.location.hostname}${API_AUTH}`, {\n      \"username\": email,\n      \"password\": password,\n    })\n  .then((response)=>{\n      if (response.status === 200 && response.data.access){\n        // console.log(response.data.access)\n          setCookie('token', `JWT ${response.data.access}`, { path: '/'})\n      }  \n      if(!response.data.access){\n        setErrorResponse(true)\n      }\n    })\n    .catch(() =>{\n      setErrorResponse(true)\n    })\n  }\n}\n   return (\n\n    <div className=\"authorization\">\n        <img src={logo} alt='logo' className='authorization__logo'/>\n        <h2 className='authorization__title'>Sign in to 5S Control</h2>\n        <div className='authorization__container'>\n            <label>Email</label>\n            <input \n                type='text' \n                placeholder='Enter Email' \n                className='authorization__input'\n                value={email} \n                onChange={(e)=>setEmail(e.target.value)}\n            />\n            {!correctEmail && <span className='authorization__error'>Email isn't correct!</span>}\n            <label>Password</label>\n            <input \n                type='password' \n                className='authorization__input' \n                placeholder='Enter Password'\n                value={password} \n                onChange={(e)=>setPassword(e.target.value)}\n            />\n            {!correctPassword && <span className='authorization__error'>This field is required</span>}\n            {errorResponse && <span className='authorization__error_response'>Incorrect email or password. Please, try again.</span>}\n            <button className='authorization__button' onClick={post}>Log In</button>\n        </div>\n\n    </div>\n   ) \n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}