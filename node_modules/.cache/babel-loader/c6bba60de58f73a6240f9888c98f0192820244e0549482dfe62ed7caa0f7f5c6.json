{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/git/reactapp/src/pages/Reports/ReportsPage.jsx\",\n  _s = $RefreshSig$();\n/* eslint-disable react-hooks/exhaustive-deps */\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useCookies } from \"react-cookie\";\nimport { Reports } from \"../../components/Reports\";\nimport { getIsInternet } from \"../../functions/getURL\";\nimport { proxy } from \"../../api/proxy\";\nimport { API_REPORT_PAGE, API_REPORT_PAGE_I } from \"../../api/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const ReportPage = _ref => {\n  _s();\n  let {\n    control\n  } = _ref;\n  const url = window.location.pathname;\n  const [data, setData] = useState(false);\n  const [cookies, setCookie, removeCookie] = useCookies([\"token\"]);\n  const paginator = page => {\n    if (getIsInternet(window.location.host)) {\n      proxy(API_REPORT_PAGE_I(control, page), \"GET\", {\n        'Authorization': cookies.token\n      }).then(el => {\n        console.log(el);\n        el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(0) : setData(el.data);\n      });\n    } else {\n      axios.get(`http://${window.location.hostname}${API_REPORT_PAGE(control, page)}`, {\n        headers: {\n          'Authorization': cookies.token\n        }\n      }).then(el => {\n        console.log(el);\n        el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(0) : setData(el.data);\n      });\n    }\n  };\n  useEffect(() => {\n    paginator(1);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !!data && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: url.includes('safety') ? 'Safety Control: Ear protection' : url.includes('idle') ? 'Idle Control' : url.includes('machine') ? 'Machine Control' : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"dashboard__count\",\n          children: [data.count, \"\\xA0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"dashboard__span\",\n          children: \" reports generated today\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Reports\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Reports, {\n        data: data,\n        paginator: e => paginator(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }, this)\n  }, void 0, false);\n};\n_s(ReportPage, \"/WXdRLp4am6T5gqz8V7Nrm22vuc=\", false, function () {\n  return [useCookies];\n});\n_c = ReportPage;\nvar _c;\n$RefreshReg$(_c, \"ReportPage\");","map":{"version":3,"names":["useState","useEffect","axios","useCookies","Reports","getIsInternet","proxy","API_REPORT_PAGE","API_REPORT_PAGE_I","ReportPage","control","url","window","location","pathname","data","setData","cookies","setCookie","removeCookie","paginator","page","host","token","then","el","console","log","detail","get","hostname","headers","includes","count","e"],"sources":["/Users/user/Desktop/git/reactapp/src/pages/Reports/ReportsPage.jsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport { useCookies } from \"react-cookie\"\nimport { Reports } from \"../../components/Reports\"\n\nimport { getIsInternet } from \"../../functions/getURL\"\nimport { proxy } from \"../../api/proxy\"\nimport { API_REPORT_PAGE, API_REPORT_PAGE_I } from \"../../api/api\"\nexport const ReportPage = ({control}) => {\n    const url = window.location.pathname\n    const [data, setData] = useState(false)\n    const [cookies, setCookie, removeCookie] = useCookies([\"token\"])\n\n    const paginator = (page) =>{\n        if (getIsInternet(window.location.host)){\n          proxy(API_REPORT_PAGE_I(control,page), \"GET\", {\n            'Authorization': cookies.token\n          })\n            .then(el => {\n              console.log(el)\n                el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(0) : setData(el.data)\n              })\n        }\n        else{\n          axios.get(`http://${window.location.hostname}${API_REPORT_PAGE(control, page)}`,{\n                headers: {\n                  'Authorization': cookies.token\n                },\n              })\n            .then(el => {\n              console.log(el)\n                el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(0) : setData(el.data)\n              })\n          }\n      }\n\n      useEffect(() => {\n        paginator(1)\n    },[])\n    \n    return (\n       <>\n        {\n        !!data  &&  \n          <div className='dashboard'>\n            <h1>{\n              url.includes('safety') ? 'Safety Control: Ear protection' :\n              url.includes('idle') ? 'Idle Control' :\n              url.includes('machine') ? 'Machine Control' : ''\n            }</h1>\n            <h2>\n              <span className='dashboard__count'>{data.count}&nbsp;</span>\n              <span className='dashboard__span'> reports generated today</span>\n            </h2>\n            <h3>Reports</h3>\n            <Reports \n              data={data}\n              paginator={(e) =>paginator(e)}\n              />\n          </div>\n     }\n       </>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}