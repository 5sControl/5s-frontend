{"ast":null,"code":"import _slicedToArray from\"/Users/user/Desktop/git/reactapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable no-unused-vars */import'./Authorization.scss';import logo from'../../../assets/svg/icon.svg';import{useEffect,useState}from'react';import{proxyPOST}from'../../../api/proxy';import{API_AUTH,API_AUTH_I}from'../../../api/api';import{useCookies}from'react-cookie';import axios from'axios';import{getIsInternet}from'../../../functions/getURL';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Authorization=function Authorization(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),correctEmail=_useState6[0],setCorrectEmail=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),correctPassword=_useState8[0],setCorrectPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),errorResponse=_useState10[0],setErrorResponse=_useState10[1];var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1];// const validate = (text) => {\n//     let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w\\w+)+$/;\n//     if (reg.test(text) === false) {\n//       setCorrectEmail(false)\n//       setEmail(text)\n//       return false;\n//     }\n//     else {\n//       setEmail(text)\n//       setCorrectEmail(true)\n//     }\n//   }\nuseEffect(function(){if(password.length>4&&password.length<20){setCorrectPassword(true);}else{setCorrectPassword(false);}},[password]);useEffect(function(){if(email.length>4&&email.length<20){setCorrectEmail(true);}else{setCorrectEmail(false);}},[email]);var post=function post(){if(getIsInternet(window.location.host)){axios.post(\"https://5scontrol.pl/proxy_to_ngrok\",{url:API_AUTH_I,method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:email,password:password})}).then(function(response){if(response.status===200&&response.data.access){// console.log(response.data.access)\nsetCookie('token',\"JWT \".concat(response.data.access),{path:'/'});}if(!response.data.access){console.log(response);setErrorResponse('Incorrect email or password. Please, try again.');}}).catch(function(error){console.log(error.message);setErrorResponse(error.message);});}else{proxyPOST(\"http://\".concat(window.location.hostname).concat(API_AUTH),{\"username\":email,\"password\":password}).then(function(response){if(response.status===200&&response.data.access){// console.log(response.data.access)\nsetCookie('token',\"JWT \".concat(response.data.access),{path:'/'});}if(!response.data.access){setErrorResponse(true);}}).catch(function(error){setErrorResponse(error.message);});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"authorization\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\",className:\"authorization__logo\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"authorization__title\",children:\"Sign in to 5S Control\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"authorization__container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Email\",className:\"authorization__input\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),!correctEmail&&/*#__PURE__*/_jsx(\"span\",{className:\"authorization__error\",children:\"Email isn't correct!\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"authorization__input\",placeholder:\"Enter Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),!correctPassword&&/*#__PURE__*/_jsx(\"span\",{className:\"authorization__error\",children:\"This field is required\"}),errorResponse&&/*#__PURE__*/_jsx(\"span\",{className:\"authorization__error_response\",children:errorResponse}),/*#__PURE__*/_jsx(\"button\",{className:\"authorization__button\",onClick:post,children:\"Log In\"})]})]});};","map":{"version":3,"names":["logo","useEffect","useState","proxyPOST","API_AUTH","API_AUTH_I","useCookies","axios","getIsInternet","Authorization","email","setEmail","password","setPassword","correctEmail","setCorrectEmail","correctPassword","setCorrectPassword","errorResponse","setErrorResponse","cookies","setCookie","length","post","window","location","host","url","method","headers","body","JSON","stringify","username","then","response","status","data","access","path","console","log","catch","error","message","hostname","e","target","value"],"sources":["/Users/user/Desktop/git/reactapp/src/pages/company/authorization/Authorization.jsx"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport './Authorization.scss'\n\nimport logo from '../../../assets/svg/icon.svg'\nimport { useEffect, useState } from 'react'\nimport { proxyPOST } from '../../../api/proxy';\nimport { API_AUTH, API_AUTH_I } from '../../../api/api';\nimport { useCookies } from 'react-cookie';\nimport axios from 'axios';\nimport { getIsInternet } from '../../../functions/getURL';\nexport const Authorization = () => {\n\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [correctEmail, setCorrectEmail] = useState(false)\n    const [correctPassword, setCorrectPassword] = useState(false)\n    const [errorResponse, setErrorResponse] = useState(false)\n    const [cookies, setCookie] = useCookies(['token']);\n\n    // const validate = (text) => {\n    //     let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w\\w+)+$/;\n    //     if (reg.test(text) === false) {\n    //       setCorrectEmail(false)\n    //       setEmail(text)\n    //       return false;\n    //     }\n    //     else {\n    //       setEmail(text)\n    //       setCorrectEmail(true)\n    //     }\n    //   }\n\n      useEffect(()=>{\n        if (password.length > 4 && password.length < 20){\n            setCorrectPassword(true)\n        }else{\n            setCorrectPassword(false)\n        }\n      },[password])\n\n      useEffect(()=>{\n        if (email.length > 4 && email.length < 20){\n            setCorrectEmail(true)\n        }\n        else{\n            setCorrectEmail(false)\n        }\n      },[email])\n     \nconst post = () =>{\n\n  if (getIsInternet(window.location.host)) {\n    axios.post(\"https://5scontrol.pl/proxy_to_ngrok\",{\n      url: API_AUTH_I,\n      method:\"POST\",\n      headers:{\n        \"Content-Type\": \"application/json\"\n      },\n      body:JSON.stringify({\n        username: email,\n        password: password,\n      })\n  })\n  \n  .then((response)=>{\n      if (response.status === 200 && response.data.access){\n        // console.log(response.data.access)\n          setCookie('token', `JWT ${response.data.access}`, { path: '/'})\n      }  \n      if(!response.data.access){\n        console.log(response)\n        setErrorResponse('Incorrect email or password. Please, try again.')\n      }\n    })\n    .catch((error) =>{\n      console.log(error.message)\n      setErrorResponse(error.message)\n    })\n  }\n  else{\n    proxyPOST(`http://${window.location.hostname}${API_AUTH}`, {\n      \"username\": email,\n      \"password\": password,\n    })\n  .then((response)=>{\n      if (response.status === 200 && response.data.access){\n        // console.log(response.data.access)\n          setCookie('token', `JWT ${response.data.access}`, { path: '/'})\n      }  \n      if(!response.data.access){\n        setErrorResponse(true)\n      }\n    })\n    .catch((error) =>{\n      setErrorResponse(error.message)\n    })\n  }\n}\n   return (\n\n    <div className=\"authorization\">\n        <img src={logo} alt='logo' className='authorization__logo'/>\n        <h2 className='authorization__title'>Sign in to 5S Control</h2>\n        <div className='authorization__container'>\n            <label>Email</label>\n            <input \n                type='text' \n                placeholder='Enter Email' \n                className='authorization__input'\n                value={email} \n                onChange={(e)=>setEmail(e.target.value)}\n            />\n            {!correctEmail && <span className='authorization__error'>Email isn't correct!</span>}\n            <label>Password</label>\n            <input \n                type='password' \n                className='authorization__input' \n                placeholder='Enter Password'\n                value={password} \n                onChange={(e)=>setPassword(e.target.value)}\n            />\n            {!correctPassword && <span className='authorization__error'>This field is required</span>}\n            {errorResponse && <span className='authorization__error_response'>{errorResponse}</span>}\n            <button className='authorization__button' onClick={post}>Log In</button>\n        </div>\n\n    </div>\n   ) \n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}