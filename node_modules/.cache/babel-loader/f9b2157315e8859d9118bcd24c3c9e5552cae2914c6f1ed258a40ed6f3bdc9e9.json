{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/git/reactapp/src/pages/company/authorization/Authorization.jsx\",\n  _s = $RefreshSig$();\nimport './Authorization.scss';\nimport logo from '../../../assets/svg/icon.svg';\nimport { useEffect, useState } from 'react';\nimport { proxyPOST } from '../../../api/proxy';\nimport { API_AUTH } from '../../../api/api';\nimport { useCookies } from 'react-cookie';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Authorization = () => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [correctEmail, setCorrectEmail] = useState(false);\n  const [correctPassword, setCorrectPassword] = useState(false);\n  const [errorResponse, setErrorResponse] = useState(false);\n  const [cookies, setCookie] = useCookies(['token']);\n\n  // const validate = (text) => {\n  //     let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w\\w+)+$/;\n  //     if (reg.test(text) === false) {\n  //       setCorrectEmail(false)\n  //       setEmail(text)\n  //       return false;\n  //     }\n  //     else {\n  //       setEmail(text)\n  //       setCorrectEmail(true)\n  //     }\n  //   }\n\n  useEffect(() => {\n    if (password.length > 4 && password.length < 20) {\n      setCorrectPassword(true);\n    } else {\n      setCorrectPassword(false);\n    }\n  }, [password]);\n  useEffect(() => {\n    if (email.length > 4 && email.length < 20) {\n      setCorrectEmail(true);\n    } else {\n      setCorrectEmail(false);\n    }\n  }, [email]);\n\n  //////////////////////////////////////////////////////////////////////CHANGE/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  const post = () => {\n    // proxyPOST(API_AUTH, {\n    //     \"username\": email,\n    //     \"password\": password,\n    //   })\n\n    axios.post(\"https://5scontrol.pl/proxy_to_ngrok\", {\n      url: API_AUTH,\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: email,\n        password: password\n      })\n    }).then(response => {\n      console.log(response);\n      if (response.status === 200 && response.data.access) {\n        console.log(response);\n        // setCookie('token', `JWT ${response.data.access}`, { path: '/'})\n      }\n    }).catch(() => {\n      setErrorResponse(true);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"authorization\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: logo,\n      alt: \"logo\",\n      className: \"authorization__logo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"authorization__title\",\n      children: \"Sign in to 5S Control\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"authorization__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter Email\",\n        className: \"authorization__input\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), !correctEmail && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"authorization__error\",\n        children: \"Email isn't correct!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        className: \"authorization__input\",\n        placeholder: \"Enter Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this), !correctPassword && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"authorization__error\",\n        children: \"This field is required\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 34\n      }, this), errorResponse && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"authorization__error_response\",\n        children: \"Incorrect email or password. Please, try again.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"authorization__button\",\n        onClick: post,\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(Authorization, \"OV/lZq0iETN/3jaYwwgc/yh9uBo=\", false, function () {\n  return [useCookies];\n});\n_c = Authorization;\nvar _c;\n$RefreshReg$(_c, \"Authorization\");","map":{"version":3,"names":["logo","useEffect","useState","proxyPOST","API_AUTH","useCookies","axios","Authorization","email","setEmail","password","setPassword","correctEmail","setCorrectEmail","correctPassword","setCorrectPassword","errorResponse","setErrorResponse","cookies","setCookie","length","post","url","method","headers","body","JSON","stringify","username","then","response","console","log","status","data","access","catch","e","target","value"],"sources":["/Users/user/Desktop/git/reactapp/src/pages/company/authorization/Authorization.jsx"],"sourcesContent":["import './Authorization.scss'\n\nimport logo from '../../../assets/svg/icon.svg'\nimport { useEffect, useState } from 'react'\nimport { proxyPOST } from '../../../api/proxy';\nimport { API_AUTH } from '../../../api/api';\nimport { useCookies } from 'react-cookie';\nimport axios from 'axios';\nexport const Authorization = () => {\n\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [correctEmail, setCorrectEmail] = useState(false)\n    const [correctPassword, setCorrectPassword] = useState(false)\n    const [errorResponse, setErrorResponse] = useState(false)\n    const [cookies, setCookie] = useCookies(['token']);\n\n    // const validate = (text) => {\n    //     let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w\\w+)+$/;\n    //     if (reg.test(text) === false) {\n    //       setCorrectEmail(false)\n    //       setEmail(text)\n    //       return false;\n    //     }\n    //     else {\n    //       setEmail(text)\n    //       setCorrectEmail(true)\n    //     }\n    //   }\n\n      useEffect(()=>{\n        if (password.length > 4 && password.length < 20){\n            setCorrectPassword(true)\n        }else{\n            setCorrectPassword(false)\n        }\n      },[password])\n\n      useEffect(()=>{\n        if (email.length > 4 && email.length < 20){\n            setCorrectEmail(true)\n        }\n        else{\n            setCorrectEmail(false)\n        }\n      },[email])\n\n//////////////////////////////////////////////////////////////////////CHANGE/////////////////////////////////////////////////////////////////////////////////////////////////////////\n     \nconst post = () =>{\n        // proxyPOST(API_AUTH, {\n        //     \"username\": email,\n        //     \"password\": password,\n        //   })\n\n          axios.post(\"https://5scontrol.pl/proxy_to_ngrok\",{\n            url: API_AUTH,\n            method:\"POST\",\n            headers:{\n              \"Content-Type\": \"application/json\"\n            },\n            body:JSON.stringify({\n              username: email,\n              password: password,\n            })\n        })\n        \n        .then((response)=>{\n          console.log(response)\n            if (response.status === 200 && response.data.access){\n              console.log(response)\n                // setCookie('token', `JWT ${response.data.access}`, { path: '/'})\n            }  \n          })\n          .catch(() =>{\n            setErrorResponse(true)\n          })\n      }\n   return (\n\n    <div className=\"authorization\">\n        <img src={logo} alt='logo' className='authorization__logo'/>\n        <h2 className='authorization__title'>Sign in to 5S Control</h2>\n        <div className='authorization__container'>\n            <label>Email</label>\n            <input \n                type='text' \n                placeholder='Enter Email' \n                className='authorization__input'\n                value={email} \n                onChange={(e)=>setEmail(e.target.value)}\n            />\n            {!correctEmail && <span className='authorization__error'>Email isn't correct!</span>}\n            <label>Password</label>\n            <input \n                type='password' \n                className='authorization__input' \n                placeholder='Enter Password'\n                value={password} \n                onChange={(e)=>setPassword(e.target.value)}\n            />\n            {!correctPassword && <span className='authorization__error'>This field is required</span>}\n            {errorResponse && <span className='authorization__error_response'>Incorrect email or password. Please, try again.</span>}\n            <button className='authorization__button' onClick={post}>Log In</button>\n        </div>\n\n    </div>\n   ) \n}"],"mappings":";;AAAA,OAAO,sBAAsB;AAE7B,OAAOA,IAAI,MAAM,8BAA8B;AAC/C,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,UAAU,QAAQ,cAAc;AACzC,OAAOC,KAAK,MAAM,OAAO;AAAC;AAC1B,OAAO,MAAMC,aAAa,GAAG,MAAM;EAAA;EAE/B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACU,YAAY,EAAEC,eAAe,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACY,eAAe,EAAEC,kBAAkB,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACc,aAAa,EAAEC,gBAAgB,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACgB,OAAO,EAAEC,SAAS,CAAC,GAAGd,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC;;EAElD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEEJ,SAAS,CAAC,MAAI;IACZ,IAAIS,QAAQ,CAACU,MAAM,GAAG,CAAC,IAAIV,QAAQ,CAACU,MAAM,GAAG,EAAE,EAAC;MAC5CL,kBAAkB,CAAC,IAAI,CAAC;IAC5B,CAAC,MAAI;MACDA,kBAAkB,CAAC,KAAK,CAAC;IAC7B;EACF,CAAC,EAAC,CAACL,QAAQ,CAAC,CAAC;EAEbT,SAAS,CAAC,MAAI;IACZ,IAAIO,KAAK,CAACY,MAAM,GAAG,CAAC,IAAIZ,KAAK,CAACY,MAAM,GAAG,EAAE,EAAC;MACtCP,eAAe,CAAC,IAAI,CAAC;IACzB,CAAC,MACG;MACAA,eAAe,CAAC,KAAK,CAAC;IAC1B;EACF,CAAC,EAAC,CAACL,KAAK,CAAC,CAAC;;EAEhB;;EAEA,MAAMa,IAAI,GAAG,MAAK;IACV;IACA;IACA;IACA;;IAEEf,KAAK,CAACe,IAAI,CAAC,qCAAqC,EAAC;MAC/CC,GAAG,EAAElB,QAAQ;MACbmB,MAAM,EAAC,MAAM;MACbC,OAAO,EAAC;QACN,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAACC,IAAI,CAACC,SAAS,CAAC;QAClBC,QAAQ,EAAEpB,KAAK;QACfE,QAAQ,EAAEA;MACZ,CAAC;IACL,CAAC,CAAC,CAEDmB,IAAI,CAAEC,QAAQ,IAAG;MAChBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;MACnB,IAAIA,QAAQ,CAACG,MAAM,KAAK,GAAG,IAAIH,QAAQ,CAACI,IAAI,CAACC,MAAM,EAAC;QAClDJ,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;QACnB;MACJ;IACF,CAAC,CAAC,CACDM,KAAK,CAAC,MAAK;MACVnB,gBAAgB,CAAC,IAAI,CAAC;IACxB,CAAC,CAAC;EACN,CAAC;EACJ,oBAEC;IAAK,SAAS,EAAC,eAAe;IAAA,wBAC1B;MAAK,GAAG,EAAEjB,IAAK;MAAC,GAAG,EAAC,MAAM;MAAC,SAAS,EAAC;IAAqB;MAAA;MAAA;MAAA;IAAA,QAAE,eAC5D;MAAI,SAAS,EAAC,sBAAsB;MAAA,UAAC;IAAqB;MAAA;MAAA;MAAA;IAAA,QAAK,eAC/D;MAAK,SAAS,EAAC,0BAA0B;MAAA,wBACrC;QAAA,UAAO;MAAK;QAAA;QAAA;QAAA;MAAA,QAAQ,eACpB;QACI,IAAI,EAAC,MAAM;QACX,WAAW,EAAC,aAAa;QACzB,SAAS,EAAC,sBAAsB;QAChC,KAAK,EAAEQ,KAAM;QACb,QAAQ,EAAG6B,CAAC,IAAG5B,QAAQ,CAAC4B,CAAC,CAACC,MAAM,CAACC,KAAK;MAAE;QAAA;QAAA;QAAA;MAAA,QAC1C,EACD,CAAC3B,YAAY,iBAAI;QAAM,SAAS,EAAC,sBAAsB;QAAA,UAAC;MAAoB;QAAA;QAAA;QAAA;MAAA,QAAO,eACpF;QAAA,UAAO;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAQ,eACvB;QACI,IAAI,EAAC,UAAU;QACf,SAAS,EAAC,sBAAsB;QAChC,WAAW,EAAC,gBAAgB;QAC5B,KAAK,EAAEF,QAAS;QAChB,QAAQ,EAAG2B,CAAC,IAAG1B,WAAW,CAAC0B,CAAC,CAACC,MAAM,CAACC,KAAK;MAAE;QAAA;QAAA;QAAA;MAAA,QAC7C,EACD,CAACzB,eAAe,iBAAI;QAAM,SAAS,EAAC,sBAAsB;QAAA,UAAC;MAAsB;QAAA;QAAA;QAAA;MAAA,QAAO,EACxFE,aAAa,iBAAI;QAAM,SAAS,EAAC,+BAA+B;QAAA,UAAC;MAA+C;QAAA;QAAA;QAAA;MAAA,QAAO,eACxH;QAAQ,SAAS,EAAC,uBAAuB;QAAC,OAAO,EAAEK,IAAK;QAAA,UAAC;MAAM;QAAA;QAAA;QAAA;MAAA,QAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QACtE;EAAA;IAAA;IAAA;IAAA;EAAA,QAEJ;AAEV,CAAC;AAAA,GApGYd,aAAa;EAAA,QAOOF,UAAU;AAAA;AAAA,KAP9BE,aAAa;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}