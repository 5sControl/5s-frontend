{"ast":null,"code":"import _slicedToArray from\"/Users/user/Desktop/git/reactapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react-hooks/exhaustive-deps */ /* eslint-disable no-unused-vars */import'./Dashboard.scss';import{useEffect,useState}from'react';import{useCookies}from'react-cookie';import{API_DASHBOARD_PAGE,API_DASHBOARD_PAGE_I}from'../../api/api.js';import{proxy}from'../../api/proxy';import axios from'axios';import{Link}from'react-router-dom';import{getIsInternet}from'../../functions/getURL';import{Reports}from'../../components/Reports';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Dashboard(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1];var _paginator=function paginator(page){if(getIsInternet(window.location.host)){proxy(API_DASHBOARD_PAGE_I(page),\"GET\",{'Authorization':cookies.token}).then(function(el){console.log(el);el.data.detail==='Authentication credentials were not provided.'||el.data.detail===\"Given token not valid for any token type\"?setData(0):setData(el.data);});}else{axios.get(\"http://\".concat(window.location.hostname).concat(API_DASHBOARD_PAGE(page)),{headers:{'Authorization':cookies.token}}).then(function(el){console.log(el);el.data.detail==='Authentication credentials were not provided.'||el.data.detail===\"Given token not valid for any token type\"?setData(0):setData(el.data);});}};useEffect(function(){_paginator(1);},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[!!data&&/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"dashboard__count\",children:[data.count,\"\\xA0\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"dashboard__span\",children:\" reports generated today\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Reports\"}),/*#__PURE__*/_jsx(Reports,{data:data,paginator:function paginator(e){return _paginator(e);}})]}),data===0&&/*#__PURE__*/_jsxs(\"h2\",{className:\"dashboard__noauth\",children:[\"Log in to view the reports\",/*#__PURE__*/_jsx(Link,{to:\"/company\",children:\" Log In\"})]})]});}export default Dashboard;","map":{"version":3,"names":["useEffect","useState","useCookies","API_DASHBOARD_PAGE","API_DASHBOARD_PAGE_I","proxy","axios","Link","getIsInternet","Reports","Dashboard","data","setData","cookies","setCookie","paginator","page","window","location","host","token","then","el","console","log","detail","get","hostname","headers","count","e"],"sources":["/Users/user/Desktop/git/reactapp/src/pages/dashboard/Dashboard.jsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\n/* eslint-disable no-unused-vars */\nimport './Dashboard.scss';\nimport { useEffect, useState } from 'react';\n\nimport { useCookies } from 'react-cookie';\n\nimport { API_DASHBOARD_PAGE, API_DASHBOARD_PAGE_I} from '../../api/api.js';\n\nimport { proxy } from '../../api/proxy';\nimport axios from 'axios';\n\nimport { Link } from 'react-router-dom';\nimport { getIsInternet } from '../../functions/getURL';\nimport { Reports } from '../../components/Reports';\n\nfunction Dashboard() {\n\n  const [data, setData] = useState(false)\n  \n  const [cookies, setCookie] = useCookies(['token']);\n  \n\n  const paginator = (page) =>{\n    if (getIsInternet(window.location.host)){\n\n      proxy(API_DASHBOARD_PAGE_I(page), \"GET\", {\n        'Authorization': cookies.token\n      })\n        .then(el => {\n          console.log(el)\n            el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(0) : setData(el.data)\n          })\n    }\n    else{\n      axios.get(`http://${window.location.hostname}${API_DASHBOARD_PAGE(page)}`,{\n            headers: {\n              'Authorization': cookies.token\n            },\n          })\n        .then(el => {\n          console.log(el)\n            el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(0) : setData(el.data)\n          })\n      }\n  }\n  \n  useEffect(() =>{\n    paginator(1)\n  },[])\n\n  return (\n    <>\n        {\n        !!data  &&  \n          <div className='dashboard'>\n            <h1>Dashboard</h1>\n            <h2>\n              <span className='dashboard__count'>{data.count}&nbsp;</span>\n              <span className='dashboard__span'> reports generated today</span>\n            </h2>\n            <h3>Reports</h3>\n            <Reports \n              data={data}\n              paginator={(e) =>paginator(e)}\n              />\n          </div>\n     }\n     {\n      data === 0 && \n      <h2 className='dashboard__noauth'>\n        Log in to view the reports\n        <Link to ='/company'> Log In</Link>\n      </h2>\n     }\n    \n    </>\n   \n  );\n}\n\nexport default Dashboard;\n"],"mappings":"sHAAA,iDACA,mCACA,MAAO,kBAAkB,CACzB,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE3C,OAASC,UAAU,KAAQ,cAAc,CAEzC,OAASC,kBAAkB,CAAEC,oBAAoB,KAAO,kBAAkB,CAE1E,OAASC,KAAK,KAAQ,iBAAiB,CACvC,MAAOC,MAAK,KAAM,OAAO,CAEzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,aAAa,KAAQ,wBAAwB,CACtD,OAASC,OAAO,KAAQ,0BAA0B,CAAC,6IAEnD,QAASC,UAAS,EAAG,CAEnB,cAAwBT,QAAQ,CAAC,KAAK,CAAC,wCAAhCU,IAAI,eAAEC,OAAO,eAEpB,gBAA6BV,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,4CAA3CW,OAAO,iBAAEC,SAAS,iBAGzB,GAAMC,WAAS,CAAG,QAAZA,UAAS,CAAIC,IAAI,CAAI,CACzB,GAAIR,aAAa,CAACS,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC,CAAC,CAEtCd,KAAK,CAACD,oBAAoB,CAACY,IAAI,CAAC,CAAE,KAAK,CAAE,CACvC,eAAe,CAAEH,OAAO,CAACO,KAC3B,CAAC,CAAC,CACCC,IAAI,CAAC,SAAAC,EAAE,CAAI,CACVC,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC,CACbA,EAAE,CAACX,IAAI,CAACc,MAAM,GAAK,+CAA+C,EAAIH,EAAE,CAACX,IAAI,CAACc,MAAM,GAAK,0CAA0C,CAAGb,OAAO,CAAC,CAAC,CAAC,CAAGA,OAAO,CAACU,EAAE,CAACX,IAAI,CAAC,CACrK,CAAC,CAAC,CACR,CAAC,IACG,CACFL,KAAK,CAACoB,GAAG,kBAAWT,MAAM,CAACC,QAAQ,CAACS,QAAQ,SAAGxB,kBAAkB,CAACa,IAAI,CAAC,EAAG,CACpEY,OAAO,CAAE,CACP,eAAe,CAAEf,OAAO,CAACO,KAC3B,CACF,CAAC,CAAC,CACHC,IAAI,CAAC,SAAAC,EAAE,CAAI,CACVC,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC,CACbA,EAAE,CAACX,IAAI,CAACc,MAAM,GAAK,+CAA+C,EAAIH,EAAE,CAACX,IAAI,CAACc,MAAM,GAAK,0CAA0C,CAAGb,OAAO,CAAC,CAAC,CAAC,CAAGA,OAAO,CAACU,EAAE,CAACX,IAAI,CAAC,CACrK,CAAC,CAAC,CACN,CACJ,CAAC,CAEDX,SAAS,CAAC,UAAK,CACbe,UAAS,CAAC,CAAC,CAAC,CACd,CAAC,CAAC,EAAE,CAAC,CAEL,mBACE,2BAEI,CAAC,CAACJ,IAAI,eACJ,aAAK,SAAS,CAAC,WAAW,wBACxB,oBAAI,WAAS,EAAK,cAClB,mCACE,cAAM,SAAS,CAAC,kBAAkB,WAAEA,IAAI,CAACkB,KAAK,CAAC,MAAM,GAAO,cAC5D,aAAM,SAAS,CAAC,iBAAiB,UAAC,0BAAwB,EAAO,GAC9D,cACL,oBAAI,SAAO,EAAK,cAChB,KAAC,OAAO,EACN,IAAI,CAAElB,IAAK,CACX,SAAS,CAAE,mBAACmB,CAAC,QAAIf,WAAS,CAACe,CAAC,CAAC,EAAC,EAC5B,GACA,CAGVnB,IAAI,GAAK,CAAC,eACV,YAAI,SAAS,CAAC,mBAAmB,WAAC,4BAEhC,mBAAC,IAAI,EAAC,EAAE,CAAE,UAAU,UAAC,SAAO,EAAO,GAChC,GAGJ,CAGP,CAEA,cAAeD,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}