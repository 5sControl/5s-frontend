{"ast":null,"code":"import _slicedToArray from\"/Users/user/Desktop/git/reactapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./Dashboard.scss';import{useEffect,useState}from'react';import{useCookies}from'react-cookie';import{API_URL,API_IMAGES,API_IMAGES_I,API_DASHBOARD_PAGE,API_DASHBOARD_PAGE_I}from'../../api/api.js';import{Algorithm,Camera}from'../../assets/svg/SVGcomponent';import{proxy}from'../../api/proxy';import axios from'axios';import{AiOutlineLeft,AiOutlineRight}from\"react-icons/ai\";import{Link}from'react-router-dom';import{getIsInternet}from'../../functions/getURL';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Dashboard(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),currentReport=_useState4[0],setCurrentReport=_useState4[1];var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),fullImage=_useState8[0],setFullImage=_useState8[1];var paginator=function paginator(page){if(getIsInternet(window.location.host)){proxy(API_DASHBOARD_PAGE_I(page),\"GET\",{'Authorization':cookies.token}).then(function(el){console.log(el);el.data.detail==='Authentication credentials were not provided.'||el.data.detail===\"Given token not valid for any token type\"?setData(0):setData(el.data);});}else{axios.get(\"http://\".concat(window.location.hostname).concat(API_DASHBOARD_PAGE(page)),{headers:{'Authorization':cookies.token}}).then(function(el){console.log(el);el.data.detail==='Authentication credentials were not provided.'||el.data.detail===\"Given token not valid for any token type\"?setData(0):setData(el.data);});}};useEffect(function(){paginator(currentPage);},[currentPage]);return/*#__PURE__*/_jsxs(_Fragment,{children:[!!data&&/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"dashboard__count\",children:[data.count,\"\\xA0\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"dashboard__span\",children:\" reports generated today\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Reports\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__choose\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__tabs\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Camera\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Algorithm\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Sort: Newest\"})]}),data&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__paginator\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Reports per page: \".concat(currentPage===Math.ceil(data.count/20)?data.count%20:20)}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__paginator_container\",children:[/*#__PURE__*/_jsx(\"button\",{className:currentPage===1?'dashboard__paginator_button_noactive':'dashboard__paginator_button',onClick:function onClick(){return setCurrentPage(currentPage-1);},children:/*#__PURE__*/_jsx(AiOutlineLeft,{})}),/*#__PURE__*/_jsxs(\"span\",{className:\"dashboard__paginator_text\",children:[\" \",\"\".concat(currentPage,\" of \").concat(Math.ceil(data.count/20))]}),/*#__PURE__*/_jsx(\"button\",{className:currentPage===Math.ceil(data.count/20)?'dashboard__paginator_button_noactive':'dashboard__paginator_button',onClick:function onClick(){return setCurrentPage(currentPage+1);},children:/*#__PURE__*/_jsx(AiOutlineRight,{})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard__reports\",children:data&&data.results.map(function(el){return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__reports_item\",onClick:function onClick(){return setCurrentReport(el);},children:[/*#__PURE__*/_jsx(\"div\",{className:currentReport.id===el.id?'dashboard__reports_item_title active':'dashboard__reports_item_title',children:el.date_created}),/*#__PURE__*/_jsx(\"div\",{children:\"# \".concat(el.id)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Camera,{}),\" \",el.camera]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Algorithm,{}),\" Safety control:\",el.action]})]},el.id);})})]}),currentReport&&/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__report\",children:[/*#__PURE__*/_jsx(\"img\",{src:getIsInternet(window.location.hostname)?\"\".concat(API_IMAGES_I+currentReport.image):\"\".concat(API_IMAGES+currentReport.image),alt:\"report img\",className:\"dashboard__report_image\",onClick:function onClick(){return setFullImage(true);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__report_item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date & Time\"}),/*#__PURE__*/_jsx(\"span\",{children:currentReport.date_created})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__report_item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Camera\"}),/*#__PURE__*/_jsx(\"span\",{children:currentReport.camera})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__report_item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Algorithm\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Safety control:\",currentReport.action]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__report_item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Not Checked\"})]})]})]})]}),data===0&&/*#__PURE__*/_jsxs(\"h2\",{className:\"dashboard__noauth\",children:[\"Log in to view the reports\",/*#__PURE__*/_jsx(Link,{to:\"/company\",children:\" Log In\"})]}),fullImage&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"dashboard__fullimage\",onClick:function onClick(){return setFullImage(false);},children:/*#__PURE__*/_jsx(\"img\",{src:getIsInternet(window.location.hostname)?\"\".concat(API_IMAGES_I+currentReport.image):\"\".concat(API_IMAGES+currentReport.image),alt:\"report img\",className:\"dashboard__fullimage_image\"})})})]});}export default Dashboard;","map":{"version":3,"names":["useEffect","useState","useCookies","API_URL","API_IMAGES","API_IMAGES_I","API_DASHBOARD_PAGE","API_DASHBOARD_PAGE_I","Algorithm","Camera","proxy","axios","AiOutlineLeft","AiOutlineRight","Link","getIsInternet","Dashboard","data","setData","currentReport","setCurrentReport","cookies","setCookie","currentPage","setCurrentPage","fullImage","setFullImage","paginator","page","window","location","host","token","then","el","console","log","detail","get","hostname","headers","count","Math","ceil","results","map","id","date_created","camera","action","image"],"sources":["/Users/user/Desktop/git/reactapp/src/pages/dashboard/Dashboard.jsx"],"sourcesContent":["import './Dashboard.scss';\nimport { useEffect, useState } from 'react';\n\nimport { useCookies } from 'react-cookie';\n\nimport { API_URL, API_IMAGES,API_IMAGES_I, API_DASHBOARD_PAGE, API_DASHBOARD_PAGE_I} from '../../api/api.js';\nimport { Algorithm, Camera } from '../../assets/svg/SVGcomponent';\nimport { proxy } from '../../api/proxy';\nimport axios from 'axios';\n\nimport { AiOutlineLeft, AiOutlineRight } from \"react-icons/ai\";\nimport { Link } from 'react-router-dom';\nimport { getIsInternet } from '../../functions/getURL';\n\nfunction Dashboard() {\n\n  const [data, setData] = useState(false)\n  const [currentReport, setCurrentReport] = useState(false)\n  const [cookies, setCookie] = useCookies(['token']);\n  const [currentPage, setCurrentPage] = useState(1)\n\n  const [fullImage, setFullImage] = useState(false)\n\n  const paginator = (page) =>{\n    if (getIsInternet(window.location.host)){\n\n      proxy(API_DASHBOARD_PAGE_I(page), \"GET\", {\n        'Authorization': cookies.token\n      })\n        .then(el => {\n          console.log(el)\n            el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(0) : setData(el.data)\n          })\n    }\n    else{\n      axios.get(`http://${window.location.hostname}${API_DASHBOARD_PAGE(page)}`,{\n            headers: {\n              'Authorization': cookies.token\n            },\n          })\n        .then(el => {\n          console.log(el)\n            el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(0) : setData(el.data)\n          })\n      }\n  }\n  \n  useEffect(()=>{\n    paginator(currentPage)\n  },[currentPage])\n  \n  return (\n    <>\n        {\n        !!data  &&  \n          <div className='dashboard'>\n            <h1>Dashboard</h1>\n            <h2>\n              <span className='dashboard__count'>{data.count}&nbsp;</span>\n              <span className='dashboard__span'> reports generated today</span>\n            </h2>\n            <h3>Reports</h3>\n            <div className='dashboard__container'>\n              <div className='dashboard__choose'>\n                <div className='dashboard__tabs'>\n                  <span>Date</span>\n                  <span>Status</span>\n                  <span>Camera</span>\n                  <span>Algorithm</span>\n                  <span>Sort: Newest</span>\n                </div>\n               {data && <>\n                <div className='dashboard__paginator'>\n                  <span>{`Reports per page: ${currentPage === Math.ceil(data.count / 20) ? data.count % 20 : 20}`}</span>\n                    <div className='dashboard__paginator_container'>\n                      <button \n                          className={currentPage === 1? 'dashboard__paginator_button_noactive': 'dashboard__paginator_button'} \n                          onClick={()=>setCurrentPage(currentPage - 1)}>\n                        <AiOutlineLeft/>\n                      </button>\n                      <span className='dashboard__paginator_text'> {`${currentPage} of ${Math.ceil(data.count / 20)}`}</span>\n                      <button \n                          className={currentPage === Math.ceil(data.count / 20)? 'dashboard__paginator_button_noactive': 'dashboard__paginator_button'}  \n                          onClick={()=>setCurrentPage(currentPage + 1)}>\n                        <AiOutlineRight/>\n                      </button>\n                    </div>\n                  </div>\n               </>}\n               \n                <div className='dashboard__reports'>\n                  {data && data.results.map((el)=>{\n                    return (\n                      <div className='dashboard__reports_item' key={el.id} onClick={()=>setCurrentReport(el)}>\n                        <div className={currentReport.id === el.id ? 'dashboard__reports_item_title active': 'dashboard__reports_item_title'}>{el.date_created}</div>\n                        <div>{`# ${el.id}`}</div>\n                        <div><Camera/> {el.camera}</div>\n                        <div><Algorithm/> Safety control:{el.action}</div>\n                      </div>\n                    )\n                  })}\n                </div>\n              </div>\n\n              {currentReport &&\n                <div className='dashboard__report'>\n                   <img \n                      src={getIsInternet(window.location.hostname) ? \n                        `${API_IMAGES_I + currentReport.image}` : \n                        `${API_IMAGES + currentReport.image}`} \n                        alt='report img' \n                        className='dashboard__report_image'\n                        onClick={()=>setFullImage(true)}\n                      />\n                   <div className='dashboard__report_item'>\n                    <span>Date & Time</span>\n                    <span>{currentReport.date_created}</span>\n                   </div>\n                   <div className='dashboard__report_item'>\n                    <span>Camera</span>\n                    <span>{currentReport.camera}</span>\n                   </div>\n                   <div className='dashboard__report_item'>\n                    <span>Algorithm</span>\n                    <span>Safety control:{currentReport.action}</span>\n                   </div>\n                   <div className='dashboard__report_item'>\n                    <span>Status</span>\n                    <span>Not Checked</span>\n                   </div>\n                </div>\n              }\n             \n            </div>\n          </div>\n     }\n     {\n      data === 0 && \n      <h2 className='dashboard__noauth'>\n        Log in to view the reports\n        <Link to ='/company'> Log In</Link>\n      </h2>\n     }\n     {\n      fullImage && <>\n        <div className='dashboard__fullimage' onClick={()=>setFullImage(false)}>\n        <img \n            src={getIsInternet(window.location.hostname) ? \n              `${API_IMAGES_I + currentReport.image}` : \n              `${API_IMAGES + currentReport.image}`} \n              alt='report img' \n              className='dashboard__fullimage_image'\n            />\n        </div>\n      </>\n     }\n    </>\n   \n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}