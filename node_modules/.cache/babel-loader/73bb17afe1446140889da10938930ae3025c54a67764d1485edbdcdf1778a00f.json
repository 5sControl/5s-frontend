{"ast":null,"code":"import _slicedToArray from\"/Users/user/Desktop/git/reactapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Fragment,useEffect,useState}from'react';import'./Company.scss';import{proxy}from'../../../api/proxy';import{API_USERLIST}from'../../../api/api';import{useCookies}from\"react-cookie\";import{AddUser}from'./components/addUser';import axios from'axios';import{getIsInternet}from'../../../functions/getURL';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var CompanyComponent=function CompanyComponent(){var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userList=_useState2[0],setUserList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddAccount=_useState4[0],setIsAddAccount=_useState4[1];useEffect(function(){if(getIsInternet(window.location.host)){proxy(API_USERLIST,\"GET\",{'Authorization':cookies.token}).then(function(res){console.log(res.data);if(res.data.detail!=='Authentication credentials were not provided.'&&res.data.detail!=='Given token not valid for any token type'){setUserList(res.data.results);}else{removeCookie('token');}});}else{axios.get(\"http://\".concat(window.location.hostname).concat(API_USERLIST),{headers:{'Authorization':cookies.token}}).then(function(res){console.log(res.data.results);if(res.data.detail!=='Authentication credentials were not provided.'&&res.data.detail!=='Given token not valid for any token type'){setUserList(res.data.results);}else{removeCookie('token');}});}},[]);return/*#__PURE__*/_jsx(_Fragment,{children:userList.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"company\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Company\"}),/*#__PURE__*/_jsx(\"div\",{className:\"company__name\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Taqtile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"company__accounts_tab\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Accounts\"}),/*#__PURE__*/_jsx(\"button\",{className:\"company__add\",onClick:function onClick(){return setIsAddAccount(true);},children:\"+ Add Account\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"company__accounts_container\",children:userList.map(function(user){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"company__user\",children:[/*#__PURE__*/_jsx(\"span\",{children:user.username}),user.id===1?/*#__PURE__*/_jsx(\"div\",{className:\"company__user_owner\",children:\"Owner\"}):/*#__PURE__*/_jsx(\"div\",{className:\"company__user_worker\",children:\"Worker\"})]})},user.id);})}),isAddAccount&&/*#__PURE__*/_jsx(AddUser,{close:function close(){setIsAddAccount(false);}})]})});};","map":{"version":3,"names":["Fragment","useEffect","useState","proxy","API_USERLIST","useCookies","AddUser","axios","getIsInternet","CompanyComponent","cookies","setCookie","removeCookie","userList","setUserList","isAddAccount","setIsAddAccount","window","location","host","token","then","res","console","log","data","detail","results","get","hostname","headers","length","map","user","username","id"],"sources":["/Users/user/Desktop/git/reactapp/src/pages/company/Company/Company.jsx"],"sourcesContent":["import { Fragment, useEffect, useState } from 'react'\nimport './Company.scss'\nimport { proxy } from '../../../api/proxy'\nimport { API_USERLIST } from '../../../api/api'\n\nimport { useCookies } from \"react-cookie\"\nimport { AddUser } from './components/addUser'\nimport axios from 'axios'\nimport { getIsInternet } from '../../../functions/getURL'\n\nexport const CompanyComponent = () =>{\n\n    const [cookies, setCookie, removeCookie] = useCookies(['token']);\n\n    const [userList, setUserList] = useState([]);\n    const [isAddAccount, setIsAddAccount] = useState(false);\n    \n    useEffect(() =>{\n       if (getIsInternet(window.location.host)) {\n        proxy(API_USERLIST, \"GET\", {\n            'Authorization': cookies.token\n          })\n          .then(res => {\n            console.log(res.data)\n            if (res.data.detail !=='Authentication credentials were not provided.' && res.data.detail!== 'Given token not valid for any token type') {\n                setUserList(res.data.results)\n            }\n            else{\n                removeCookie('token')\n            }\n        })\n       }\n       else{\n        axios.get(`http://${window.location.hostname}${API_USERLIST}`,{\n                headers: {\n                'Authorization': cookies.token\n                },\n            })\n            .then(res => {\n                console.log(res.data.results)\n                if (res.data.detail !=='Authentication credentials were not provided.' && res.data.detail!== 'Given token not valid for any token type') {\n                    setUserList(res.data.results)\n                }\n                else{\n                    removeCookie('token')\n                }\n            })\n       }\n    },[])\n\n    return(\n    <>\n        {userList.length > 0 && \n        <div className='company'>\n            <h2>Company</h2>\n            <div className='company__name'>\n                <h3>Taqtile</h3>\n            </div>\n            <div className='company__accounts_tab'>\n                <h2>Accounts</h2>\n                <button className='company__add' onClick={() => setIsAddAccount(true)}>+ Add Account</button>\n            </div>\n\n            <div className='company__accounts_container'>\n                {userList.map((user) => \n                <Fragment key={user.id}>\n                    <div className='company__user'>\n                        <span>{user.username}</span>\n                        {user.id === 1 ?\n                        <div className='company__user_owner'>Owner</div>\n                        :\n                        <div className='company__user_worker'>Worker</div>\n                        }\n                        \n                    </div>\n                </Fragment>\n                )}\n            </div>\n            {isAddAccount && <AddUser close={() =>{setIsAddAccount(false)}}/>}\n        </div> \n        }\n    </>\n    )\n}"],"mappings":"sHAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACrD,MAAO,gBAAgB,CACvB,OAASC,KAAK,KAAQ,oBAAoB,CAC1C,OAASC,YAAY,KAAQ,kBAAkB,CAE/C,OAASC,UAAU,KAAQ,cAAc,CACzC,OAASC,OAAO,KAAQ,sBAAsB,CAC9C,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,aAAa,KAAQ,2BAA2B,8IAEzD,MAAO,IAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,EAAQ,CAEjC,gBAA2CJ,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,4CAAzDK,OAAO,iBAAEC,SAAS,iBAAEC,YAAY,iBAEvC,cAAgCV,QAAQ,CAAC,EAAE,CAAC,wCAArCW,QAAQ,eAAEC,WAAW,eAC5B,eAAwCZ,QAAQ,CAAC,KAAK,CAAC,yCAAhDa,YAAY,eAAEC,eAAe,eAEpCf,SAAS,CAAC,UAAK,CACZ,GAAIO,aAAa,CAACS,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC,CAAE,CACxChB,KAAK,CAACC,YAAY,CAAE,KAAK,CAAE,CACvB,eAAe,CAAEM,OAAO,CAACU,KAC3B,CAAC,CAAC,CACDC,IAAI,CAAC,SAAAC,GAAG,CAAI,CACXC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAAC,CACrB,GAAIH,GAAG,CAACG,IAAI,CAACC,MAAM,GAAI,+CAA+C,EAAIJ,GAAG,CAACG,IAAI,CAACC,MAAM,GAAI,0CAA0C,CAAE,CACrIZ,WAAW,CAACQ,GAAG,CAACG,IAAI,CAACE,OAAO,CAAC,CACjC,CAAC,IACG,CACAf,YAAY,CAAC,OAAO,CAAC,CACzB,CACJ,CAAC,CAAC,CACH,CAAC,IACG,CACHL,KAAK,CAACqB,GAAG,kBAAWX,MAAM,CAACC,QAAQ,CAACW,QAAQ,SAAGzB,YAAY,EAAG,CACtD0B,OAAO,CAAE,CACT,eAAe,CAAEpB,OAAO,CAACU,KACzB,CACJ,CAAC,CAAC,CACDC,IAAI,CAAC,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAACE,OAAO,CAAC,CAC7B,GAAIL,GAAG,CAACG,IAAI,CAACC,MAAM,GAAI,+CAA+C,EAAIJ,GAAG,CAACG,IAAI,CAACC,MAAM,GAAI,0CAA0C,CAAE,CACrIZ,WAAW,CAACQ,GAAG,CAACG,IAAI,CAACE,OAAO,CAAC,CACjC,CAAC,IACG,CACAf,YAAY,CAAC,OAAO,CAAC,CACzB,CACJ,CAAC,CAAC,CACP,CACH,CAAC,CAAC,EAAE,CAAC,CAEL,mBACA,yBACKC,QAAQ,CAACkB,MAAM,CAAG,CAAC,eACpB,aAAK,SAAS,CAAC,SAAS,wBACpB,oBAAI,SAAO,EAAK,cAChB,YAAK,SAAS,CAAC,eAAe,uBAC1B,oBAAI,SAAO,EAAK,EACd,cACN,aAAK,SAAS,CAAC,uBAAuB,wBAClC,oBAAI,UAAQ,EAAK,cACjB,eAAQ,SAAS,CAAC,cAAc,CAAC,OAAO,CAAE,yBAAMf,gBAAe,CAAC,IAAI,CAAC,EAAC,UAAC,eAAa,EAAS,GAC3F,cAEN,YAAK,SAAS,CAAC,6BAA6B,UACvCH,QAAQ,CAACmB,GAAG,CAAC,SAACC,IAAI,qBACnB,KAAC,QAAQ,wBACL,aAAK,SAAS,CAAC,eAAe,wBAC1B,sBAAOA,IAAI,CAACC,QAAQ,EAAQ,CAC3BD,IAAI,CAACE,EAAE,GAAK,CAAC,cACd,YAAK,SAAS,CAAC,qBAAqB,UAAC,OAAK,EAAM,cAEhD,YAAK,SAAS,CAAC,sBAAsB,UAAC,QAAM,EAAM,GAGhD,EATKF,IAAI,CAACE,EAAE,CAUX,GACV,EACC,CACLpB,YAAY,eAAI,KAAC,OAAO,EAAC,KAAK,CAAE,gBAAK,CAACC,eAAe,CAAC,KAAK,CAAC,EAAE,EAAE,GAC/D,EAEP,CAEP,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}