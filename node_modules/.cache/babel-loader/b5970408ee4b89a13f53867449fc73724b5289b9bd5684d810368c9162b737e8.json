{"ast":null,"code":"import _slicedToArray from\"/Users/user/Desktop/git/reactapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react-hooks/exhaustive-deps */import{useState,useEffect}from\"react\";import axios from\"axios\";import{useCookies}from\"react-cookie\";import{Reports}from\"../../components/Reports\";import{getIsInternet}from\"../../functions/getURL\";import{proxy}from\"../../api/proxy\";import{API_REPORT_PAGE,API_REPORT_PAGE_I}from\"../../api/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var ReportPage=function ReportPage(_ref){var control=_ref.control;var url=window.location.pathname;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useCookies=useCookies([\"token\"]),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var _paginator=function paginator(page){if(getIsInternet(window.location.host)){proxy(API_REPORT_PAGE_I(control,page),\"GET\",{'Authorization':cookies.token}).then(function(el){console.log(el);el.data.detail==='Authentication credentials were not provided.'||el.data.detail===\"Given token not valid for any token type\"?setData(0):setData(el.data);});}else{axios.get(\"http://\".concat(window.location.hostname).concat(API_REPORT_PAGE(control,page)),{headers:{'Authorization':cookies.token}}).then(function(el){console.log(el);el.data.detail==='Authentication credentials were not provided.'||el.data.detail===\"Given token not valid for any token type\"?setData(0):setData(el.data);});}};useEffect(function(){_paginator(1);},[]);return/*#__PURE__*/_jsx(_Fragment,{children:!!data&&/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"h1\",{children:url.includes('safety')?'Safety Control: Ear protection'.toUpperCase():url.includes('idle')?'Idle Control'.toUpperCase():url.includes('machine')?'Machine Control'.toUpperCase():''}),/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"dashboard__count\",children:[data.count,\"\\xA0\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"dashboard__span\",children:\" reports generated \"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Reports\"}),/*#__PURE__*/_jsx(Reports,{data:data,paginator:function paginator(e){return _paginator(e);}})]})});};","map":{"version":3,"names":["useState","useEffect","axios","useCookies","Reports","getIsInternet","proxy","API_REPORT_PAGE","API_REPORT_PAGE_I","ReportPage","control","url","window","location","pathname","data","setData","cookies","setCookie","removeCookie","paginator","page","host","token","then","el","console","log","detail","get","hostname","headers","includes","toUpperCase","count","e"],"sources":["/Users/user/Desktop/git/reactapp/src/pages/Reports/ReportsPage.jsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport { useCookies } from \"react-cookie\"\nimport { Reports } from \"../../components/Reports\"\n\nimport { getIsInternet } from \"../../functions/getURL\"\nimport { proxy } from \"../../api/proxy\"\nimport { API_REPORT_PAGE, API_REPORT_PAGE_I } from \"../../api/api\"\nexport const ReportPage = ({control}) => {\n    const url = window.location.pathname\n    const [data, setData] = useState(false)\n    const [cookies, setCookie, removeCookie] = useCookies([\"token\"])\n\n    const paginator = (page) =>{\n        if (getIsInternet(window.location.host)){\n          proxy(API_REPORT_PAGE_I(control,page), \"GET\", {\n            'Authorization': cookies.token\n          })\n            .then(el => {\n              console.log(el)\n                el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(0) : setData(el.data)\n              })\n        }\n        else{\n          axios.get(`http://${window.location.hostname}${API_REPORT_PAGE(control, page)}`,{\n                headers: {\n                  'Authorization': cookies.token\n                },\n              })\n            .then(el => {\n              console.log(el)\n                el.data.detail === 'Authentication credentials were not provided.' || el.data.detail === \"Given token not valid for any token type\" ? setData(0) : setData(el.data)\n              })\n          }\n      }\n\n      useEffect(() => {\n        paginator(1)\n    },[])\n    \n    return (\n       <>\n        {\n        !!data  &&  \n          <div className='dashboard'>\n            <h1>{\n              url.includes('safety') ? 'Safety Control: Ear protection'.toUpperCase() :\n              url.includes('idle') ? 'Idle Control'.toUpperCase() :\n              url.includes('machine') ? 'Machine Control'.toUpperCase() : ''\n            }</h1>\n            <h2>\n              <span className='dashboard__count'>{data.count}&nbsp;</span>\n              <span className='dashboard__span'> reports generated </span>\n            </h2>\n            <h3>Reports</h3>\n            <Reports \n              data={data}\n              paginator={(e) =>paginator(e)}\n              />\n          </div>\n     }\n       </>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}